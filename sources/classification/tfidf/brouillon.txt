FROM ubuntu:22.04

WORKDIR /usr/app/src
ENV PYTHONUNBUFFERED=0
# ENV AZ_REPO=lsb_release\ -cs

RUN apt-get -y update && \
    apt-get -y install sudo

RUN apt-get -y install python3 && \
    apt-get -y install python3-pip

RUN pip install --no-cache-dir -r requirements.txt

#RUN ["/bin/bash", "-c", "source set_azure_email.env"]
#RUN source 

#Installation d'Azure CLI (pour s'authentifier sur Azure)
RUN apt-get install -y curl
RUN curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash

COPY . .

RUN chmod +x push_data_on_datalake.sh 
CMD ["sh", "push_data_on_datalake.sh"]



#docker container prune
#docker build -t imagepythonpushdata .
#docker run -it imagepythonpushdata

#docker run --name containerpythonpushdata imagepythonpushdata  